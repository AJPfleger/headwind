{% extends "base.html.j2" %}

{% block maincol %}

<h1 class="title">
{{ metric.name }}
</h1>

<hr/>

{# <nav class="breadcrumb" aria-label="breadcrumbs">
  <ul>
    {% for part in current_url().parts %}
    <li><a href="#">{{ part }}</a></li>
    {% endfor %}
  </ul>
</nav> #}

{% for plot in plots %}
<img src="{{ url_for(plot) }}" />
{% endfor %}

<div class="container">
{% for g, df in dataframe.groupby("branch") %}
<h2 class="title">{{g}}</h2>

<table class="table is-fullwidth">
  <thead>
    <tr>
    {% for column in df.columns if not column in ("branch", "value") %}
      <td>{{ column }}</td>
    {% endfor %}
      <td>value [{{ metric.unit }}]<td/>
    </tr>
  </thead>
  <tbody>
  {% for row in df.itertuples() %}
    <tr>
    {# {% for column in df.columns if not column == "branch" %} #}
      <td>
        <a href="https://github.com/acts-project/acts/commit/{{row.commit}}" target="blank">
          {{ row.commit[:7] }}
        </a>
      </td>
      <td>
      {{ row.date|dateformat("%Y-%m-%d %H:%M") }}
      </td>
      <td>
      {{ row.message|first_line|issue_links }}
      </td>
      <td>
      {{ "%.2f"|format(row.value) }}
      </td>
    {# {% endfor %} #}
    </tr>
  {% endfor %}
  <tbody>
</table>

{# {{ df[["commit", "date", "message", "value"]].to_html(border=0, justify="left", index=False) }} #}
{% endfor %}
</div>

{% endblock %}